#!/bin/bash

output=$(cat)

regex="bash: (.*\.py): command not found"
if [[ "$output" =~ $regex ]]; then

    # If file exists
    if [[ -f "${BASH_REMATCH[1]}" ]]; then
        echo "Did you mean to run \`python ${BASH_REMATCH[1]}\`?"
        exit
    fi
fi

regex="bash: \./([^:]*): Is a directory"
if [[ "$output" =~ $regex ]]; then
    echo "Cannot execute a directory. Did you mean to \`cd\` into \`${BASH_REMATCH[1]}\` instead?"
    exit
fi

regex="bash: (\./.*\.py): Permission denied"
if [[ "$output" =~ $regex ]]; then

    # If file exists
    if [[ -f "${BASH_REMATCH[1]}" ]]; then
        echo "Did you mean to run \`python ${BASH_REMATCH[1]}\`?"
        exit
    fi
fi

regex="bash: /\.([^:]*): No such file or directory"
if [[ "$output" =~ $regex ]]; then

    # If file exists
    if [[ -f "${BASH_REMATCH[1]}" ]]; then
        echo "Did you mean to run \`./${BASH_REMATCH[1]}\`?"
        exit
    fi
fi
