#!/bin/bash

# If a single target and not an option
if [[ $# -eq 1 ]] && [[ "$1" != -* ]]; then

    # If no Makefile
    if [[ ! -f Makefile && ! -f makefile ]]; then

        # If target ends with .c or is a directory
        if [[ "$1" == *?.c || -d "$1" ]]; then

            # Don't suppress "Nothing to be done" with --silent
            /usr/bin/make "$1"

            # Else make exits with 0
            exit 1
        fi
    fi
fi

# Don't echo recipes
/usr/bin/make --always-make --silent "$@"
